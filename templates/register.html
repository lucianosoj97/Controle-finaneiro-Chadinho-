<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Adicione o link para o arquivo CSS do Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/register.css">
    <link rel="stylesheet" href="/static/css/loading.css">
    <title>Cadastro</title>
</head>
<body>
    <div id="loadingIndicator" style="display: none;">
        <img src="/static/gif/loading.gif" alt="Carregando..." />
    </div>
<nav class="navbar custom-navbar flex-column custom-bg-color">
    <ul class="navbar-nav flex-row"> <!-- Adicionei a classe flex-row -->
        <li class="nav-item">
            <a class="nav-link" href="/dashboard">Tela Inicial</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/register">Novo cadastro</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/list">Lista/Editar Cadastros</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" href="/account_management">Gerenciar Contas</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="/">Sair</a>
        </li>
    </ul>
</nav>
<div class="container">
    <h1>Cadastro</h1>
    <form action="/register" method="post">
        <div class="label-input">
            <label class="label-text" for="full_name">Nome completo:</label>
            <input type="text" id="full_name" name="full_name" placeholder="Digite seu nome completo" required>
        </div>
        <div class="label-input">
            <label class="label-text" for="cpf">CPF:</label>
            <input type="text" id="cpf" name="cpf" placeholder="Digite seu CPF" required oninput="formatarCPF(this)">
        </div>
        <div class="label-input">
            <label class="label-text" for="birth_date">Data de Nascimento:</label>
            <input type="date" id="birth_date" name="birth_date" placeholder="Selecione sua data de nascimento" required>
        </div>
        <div class="label-input">
            <label class="label-text" for="address">Endereço:</label>
            <input type="text" id="address" name="address" placeholder="Digite seu endereço completo" required>
        </div>
        <div class="label-input">
            <label class="label-text" for="deposit_amount">Valor depositado:</label>
            <input type="text" id="deposit_amount" name="deposit_amount" placeholder="Digite o valor depositado" oninput="this.value = formatarValor(this.value)" required>
        </div>
        <div class="label-input">
            <label class="label-text" for="payment_percentage">Porcentagem paga:</label>
            <input type="text" id="payment_percentage" name="payment_percentage" placeholder="Digite a porcentagem paga" oninput="this.value = formatarPorcentagem(this.value)" required>
        </div>
        <div class="label-input">
            <label class="label-text" for="betting_house">Casa de aposta:</label>
            <input type="text" id="betting_house" name="betting_house" placeholder="Digite o nome da casa de aposta" required>
        </div>
        <input type="submit" id="submitButton" value="Cadastrar">
    </form>
</div>
<!-- Adicione o link para o arquivo JS do Bootstrap (opcional, mas recomendado) -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
     $(document).ready(function() {
            $('a[href="/dashboard"]').click(function() {
                $('#loadingIndicator').show(); // Atualizado para o novo ID
            });

            // Se quiser aplicar a todos os links da navegação
            $('nav a').click(function() {
                $('#loadingIndicator').show(); // Mostra o GIF de carregamento para qualquer link clicado na navegação
            });
            $('#submitButton').click(function() {
                $('#loadingIndicator').show(); // Mostra o GIF de carregamento para qualquer link clicado na navegação
            });
        });
    function formatarCPF(campo) {
        campo.value = campo.value.replace(/\D/g, ''); // Remove caracteres não numéricos
        campo.value = campo.value.replace(/(\d{3})(\d)/, '$1.$2'); // Coloca ponto entre os três primeiros dígitos
        campo.value = campo.value.replace(/(\d{3})(\d)/, '$1.$2'); // Coloca ponto entre os três últimos dígitos
        campo.value = campo.value.replace(/(\d{3})(\d{1,2})$/, '$1-$2'); // Coloca hífen entre os três últimos dígitos
        }
        document.getElementById('deposit_amount').addEventListener('input', function(event) {
            const input = event.target;
            let valor = input.value.replace(/\D/g, ''); // Remove todos os caracteres não numéricos
            valor = valor ? parseInt(valor, 10) : 0; // Converte para inteiro, se possível, caso contrário, define como zero
            const valorFormatado = valor.toLocaleString('pt-BR'); // Formata o valor com separadores de milhares
            input.value = 'R$ ' + valorFormatado; // Adiciona o símbolo de moeda e atualiza o valor no campo de entrada
        });
        function formatarPorcentagem(valor) {
    // Remove todos os caracteres não numéricos, exceto o ponto e a vírgula
    const valorLimpo = valor.replace(/[^\d.,]/g, '');
    // Substitui a vírgula por ponto, para garantir que o parseFloat funcione corretamente
    const valorComPonto = valorLimpo.replace(',', '.');
    // Converte para número e formata como porcentagem
    let valorNumerico = parseFloat(valorComPonto) / 100; // Divida por 100 para obter a porcentagem correta
    
    // Verifica se o valor é NaN (não é um número)
    if (isNaN(valorNumerico)) {
        valorNumerico = '';
    }

    const valorFormatado = valorNumerico.toLocaleString('pt-BR', { style: 'percent' });
    return valorFormatado;
}

document.getElementById('payment_percentage').addEventListener('input', function(event) {
    const input = event.target;
    const valorFormatado = formatarPorcentagem(input.value);
    input.value = valorFormatado;
});
</script>
<img src="/static/image/Instagram.png" class="img-logo">
</body>
</html>
